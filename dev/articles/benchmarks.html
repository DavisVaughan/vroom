<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vroom Benchmarks • vroom</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Vroom Benchmarks">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vroom</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/vroom.html">Get started</a>
</li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/05/vroom-1-0-0/">Version 1.0.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/vroom">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Vroom Benchmarks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/vroom/blob/master/vignettes/benchmarks.Rmd"><code>vignettes/benchmarks.Rmd</code></a></small>
      <div class="hidden name"><code>benchmarks.Rmd</code></div>

    </div>

    
    
<p>vroom is a new approach to reading delimited and fixed width data into R.</p>
<p>It stems from the observation that when parsing files reading data from disk and finding the delimiters is generally not the main bottle neck. Instead (re)-allocating memory and parsing the values into R data types (particularly for characters) takes the bulk of the time.</p>
<p>Therefore you can obtain very rapid input by first performing a fast indexing step and then using the Altrep framework available in R versions 3.5+ to access the values in a lazy / delayed fashion.</p>
<div id="how-it-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-it-works" class="anchor"></a>How it works</h2>
<p>The initial reading of the file simply records the locations of each individual record, the actual values are not read into R. Altrep vectors are created for each column in the data which hold a pointer to the index and the memory mapped file. When these vectors are indexed the value is read from the memory mapping.</p>
<p>This means initial reading is extremely fast, in the real world dataset below it is ~ 1/4 the time of the multi-threaded <code>data.table::fread()</code>. Sampling operations are likewise extremely fast, as only the data actually included in the sample is read. This means things like the tibble print method, calling <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> <code>x[sample(), ]</code> etc. have very low overhead. Filtering also can be fast, only the columns included in the filter selection have to be fully read and only the data in the filtered rows needs to be read from the remaining columns. Grouped aggregations likewise only need to read the grouping variables and the variables aggregated.</p>
<p>Once a particular vector is fully materialized the speed for all subsequent operations should be identical to a normal R vector.</p>
<p>This approach potentially also allows you to work with data that is larger than memory. As long as you are careful to avoid materializing the entire dataset at once it can be efficiently queried and subset.</p>
</div>
<div id="reading-delimited-files" class="section level1">
<h1 class="hasAnchor">
<a href="#reading-delimited-files" class="anchor"></a>Reading delimited files</h1>
<p>The following benchmarks all measure reading delimited files of various sizes and data types. Because vroom delays reading the benchmarks also do some manipulation of the data afterwards to try and provide a more realistic performance comparison.</p>
<p>Because the <code>read.delim</code> results are so much slower than the others they are excluded from the plots, but are retained in the tables.</p>
<div id="taxi-trip-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#taxi-trip-dataset" class="anchor"></a>Taxi Trip Dataset</h2>
<p>This real world dataset is from Freedom of Information Law (FOIL) Taxi Trip Data from the NYC Taxi and Limousine Commission 2013, originally posted at <a href="http://chriswhong.com/open-data/foil_nyc_taxi/" class="uri">http://chriswhong.com/open-data/foil_nyc_taxi/</a>. It is also hosted on <a href="https://archive.org/details/nycTaxiTripData2013">archive.org</a>.</p>
<p>The first table trip_fare_1.csv is 1.55G in size.</p>
<pre><code>#&gt; Observations: 14,776,615
#&gt; Variables: 11
#&gt; $ medallion       &lt;chr&gt; "89D227B655E5C82AECF13C3F540D4CF4", "0BD7C8F5B...
#&gt; $ hack_license    &lt;chr&gt; "BA96DE419E711691B9445D6A6307C170", "9FD8F69F0...
#&gt; $ vendor_id       &lt;chr&gt; "CMT", "CMT", "CMT", "CMT", "CMT", "CMT", "CMT...
#&gt; $ pickup_datetime &lt;chr&gt; "2013-01-01 15:11:48", "2013-01-06 00:18:35", ...
#&gt; $ payment_type    &lt;chr&gt; "CSH", "CSH", "CSH", "CSH", "CSH", "CSH", "CSH...
#&gt; $ fare_amount     &lt;dbl&gt; 6.5, 6.0, 5.5, 5.0, 9.5, 9.5, 6.0, 34.0, 5.5, ...
#&gt; $ surcharge       &lt;dbl&gt; 0.0, 0.5, 1.0, 0.5, 0.5, 0.0, 0.0, 0.0, 1.0, 0...
#&gt; $ mta_tax         &lt;dbl&gt; 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0...
#&gt; $ tip_amount      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
#&gt; $ tolls_amount    &lt;dbl&gt; 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 4.8, 0.0, 0...
#&gt; $ total_amount    &lt;dbl&gt; 7.0, 7.0, 7.0, 6.0, 10.5, 10.0, 6.5, 39.3, 7.0...</code></pre>
<div id="taxi-benchmarks" class="section level3">
<h3 class="hasAnchor">
<a href="#taxi-benchmarks" class="anchor"></a>Taxi Benchmarks</h3>
<p>The code used to run the taxi benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/taxi-benchmark.R">bench/taxi-benchmark.R</a>.</p>
<p>The benchmarks labeled <code>vroom_base</code> uses <code>vroom</code> with base functions for manipulation. <code>vroom_dplyr</code> uses <code>vroom</code> to read the file and dplyr functions to manipulate. <code>data.table</code> uses <code>fread()</code> to read the file and <code>data.table</code> functions to manipulate and <code>readr</code> uses <code>readr</code> to read the file and <code>dplyr</code> to manipulate. By default vroom only uses Altrep for character vectors, these are labeled <code><a href="../reference/vroom.html">vroom(altrep: normal)</a></code>. The benchmarks labeled <code><a href="../reference/vroom.html">vroom(altrep: full)</a></code> instead use Altrep vectors for all supported types and <code><a href="../reference/vroom.html">vroom(altrep: none)</a></code> disable Altrep entirely.</p>
<p>The following operations are performed.</p>
<ul>
<li>The data is read</li>
<li>
<code><a href="https://rdrr.io/r/base/print.html">print()</a></code> - <em>N.B. read.delim uses <code><a href="https://rdrr.io/r/base/print.html">print(head(x, 10))</a></code> because printing the whole dataset takes &gt; 10 minutes</em>
</li>
<li><code><a href="https://rdrr.io/r/utils/head.html">head()</a></code></li>
<li><code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code></li>
<li>Sampling 100 random rows</li>
<li>Filtering for “UNK” payment, this is 6434 rows (0.0435% of total).</li>
<li>Aggregation of mean fare amount per payment type.</li>
</ul>
<img src="benchmarks_files/figure-html/unnamed-chunk-2-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
manip
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1m 14.5s
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
312ms
</td>
<td style="text-align:right;">
959ms
</td>
<td style="text-align:right;">
1m 15.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
34.8s
</td>
<td style="text-align:right;">
93ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
185ms
</td>
<td style="text-align:right;">
736ms
</td>
<td style="text-align:right;">
35.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
17.8s
</td>
<td style="text-align:right;">
95ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.1s
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
20.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
18.3s
</td>
<td style="text-align:right;">
92ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
898ms
</td>
<td style="text-align:right;">
747ms
</td>
<td style="text-align:right;">
20.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
15.2s
</td>
<td style="text-align:right;">
11ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
94ms
</td>
<td style="text-align:right;">
222ms
</td>
<td style="text-align:right;">
15.5s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
2.3s
</td>
<td style="text-align:right;">
86ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
8.1s
</td>
<td style="text-align:right;">
11.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
121ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
8s
</td>
<td style="text-align:right;">
10.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
160ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.1s
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
2.1s
</td>
<td style="text-align:right;">
6s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
2.4s
</td>
<td style="text-align:right;">
88ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.3s
</td>
<td style="text-align:right;">
2.1s
</td>
<td style="text-align:right;">
5.8s
</td>
</tr>
</tbody>
</table>
<p>(<em>N.B. Rcpp used in the dplyr implementation fully materializes all the Altrep numeric vectors when using <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> or <code>sample_n()</code>, which is why the first of these cases have additional overhead when using full Altrep.</em>).</p>
</div>
</div>
<div id="all-numeric-data" class="section level2">
<h2 class="hasAnchor">
<a href="#all-numeric-data" class="anchor"></a>All numeric data</h2>
<p>The code used to run the all numeric benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/all_numeric-benchmark.R">bench/all_numeric-benchmark.R</a>.</p>
<p>All numeric data is really a worst case scenario for vroom. The index takes about as much memory as the parsed data. Also because parsing doubles can be done quickly in parallel and text representations of doubles are only ~25 characters at most there isn’t a great deal of savings for delayed parsing.</p>
<p>For these reasons (and because the data.table implementation is very fast) vroom is a bit slower than fread for pure numeric data.</p>
<p>However the vroom is multi-threaded and therefore is quicker than readr and read.delim.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-3-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
manip
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1m 58.5s
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.5s
</td>
<td style="text-align:right;">
4.8s
</td>
<td style="text-align:right;">
36ms
</td>
<td style="text-align:right;">
2m 4.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
12.6s
</td>
<td style="text-align:right;">
103ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
32ms
</td>
<td style="text-align:right;">
12.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
109ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
68ms
</td>
<td style="text-align:right;">
53ms
</td>
<td style="text-align:right;">
1.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
105ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
63ms
</td>
<td style="text-align:right;">
52ms
</td>
<td style="text-align:right;">
1.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
269ms
</td>
<td style="text-align:right;">
188ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
841ms
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
38ms
</td>
<td style="text-align:right;">
1.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
106ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
32ms
</td>
<td style="text-align:right;">
1.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
1.1s
</td>
<td style="text-align:right;">
105ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
32ms
</td>
<td style="text-align:right;">
1.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
370ms
</td>
<td style="text-align:right;">
156ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
54ms
</td>
<td style="text-align:right;">
272ms
</td>
<td style="text-align:right;">
854ms
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
623ms
</td>
<td style="text-align:right;">
12ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
54ms
</td>
<td style="text-align:right;">
696ms
</td>
</tr>
</tbody>
</table>
<div id="wide-all-numeric-data" class="section level3">
<h3 class="hasAnchor">
<a href="#wide-all-numeric-data" class="anchor"></a>Wide all numeric data</h3>
<p>The code used to run the wide all numeric benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/all_numeric_wide-benchmark.R">bench/all_numeric-benchmark.R</a>.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-4-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
manip
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
31ms
</td>
<td style="text-align:right;">
4.3s
</td>
<td style="text-align:right;">
10ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
4.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
1.1s
</td>
<td style="text-align:right;">
256ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
460ms
</td>
<td style="text-align:right;">
265ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
21ms
</td>
<td style="text-align:right;">
752ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
439ms
</td>
<td style="text-align:right;">
267ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
11ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
734ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
457ms
</td>
<td style="text-align:right;">
206ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
675ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
316ms
</td>
<td style="text-align:right;">
205ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
94ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
23ms
</td>
<td style="text-align:right;">
647ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
368ms
</td>
<td style="text-align:right;">
190ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
20ms
</td>
<td style="text-align:right;">
584ms
</td>
</tr>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
212ms
</td>
<td style="text-align:right;">
229ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
18ms
</td>
<td style="text-align:right;">
18ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
488ms
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
218ms
</td>
<td style="text-align:right;">
243ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
482ms
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="all-character-data" class="section level2">
<h2 class="hasAnchor">
<a href="#all-character-data" class="anchor"></a>All character data</h2>
<p>The code used to run the all character benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/all_character-benchmark.R">bench/all_character-benchmark.R</a>.</p>
<p>All character data is a best case scenario for vroom when using Altrep, as it takes full advantage of the lazy reading.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-5-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
manip
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1m 39.9s
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
24ms
</td>
<td style="text-align:right;">
401ms
</td>
<td style="text-align:right;">
1m 40.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1m 2.9s
</td>
<td style="text-align:right;">
102ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
404ms
</td>
<td style="text-align:right;">
1m 3.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
51.6s
</td>
<td style="text-align:right;">
105ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
25ms
</td>
<td style="text-align:right;">
2.3s
</td>
<td style="text-align:right;">
54s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
48.9s
</td>
<td style="text-align:right;">
102ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
316ms
</td>
<td style="text-align:right;">
49.4s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
38s
</td>
<td style="text-align:right;">
13ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
10ms
</td>
<td style="text-align:right;">
244ms
</td>
<td style="text-align:right;">
38.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
333ms
</td>
<td style="text-align:right;">
176ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
198ms
</td>
<td style="text-align:right;">
2.1s
</td>
<td style="text-align:right;">
2.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
358ms
</td>
<td style="text-align:right;">
136ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
181ms
</td>
<td style="text-align:right;">
2.1s
</td>
<td style="text-align:right;">
2.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
273ms
</td>
<td style="text-align:right;">
176ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
197ms
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
2.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
272ms
</td>
<td style="text-align:right;">
173ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
191ms
</td>
<td style="text-align:right;">
1.4s
</td>
<td style="text-align:right;">
2s
</td>
</tr>
</tbody>
</table>
<div id="wide-all-character-data" class="section level3">
<h3 class="hasAnchor">
<a href="#wide-all-character-data" class="anchor"></a>Wide all character data</h3>
<p>The code used to run the wide all character benchmarks is in <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/all_character_wide-benchmark.R">bench/all_character-benchmark.R</a>.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-6-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
manip
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
44ms
</td>
<td style="text-align:right;">
18.8s
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
10ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
18.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
310ms
</td>
<td style="text-align:right;">
422ms
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
11ms
</td>
<td style="text-align:right;">
11ms
</td>
<td style="text-align:right;">
33ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
800ms
</td>
</tr>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
151ms
</td>
<td style="text-align:right;">
416ms
</td>
<td style="text-align:right;">
25ms
</td>
<td style="text-align:right;">
10ms
</td>
<td style="text-align:right;">
54ms
</td>
<td style="text-align:right;">
90ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
746ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
233ms
</td>
<td style="text-align:right;">
249ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
21ms
</td>
<td style="text-align:right;">
37ms
</td>
<td style="text-align:right;">
10ms
</td>
<td style="text-align:right;">
558ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
341ms
</td>
<td style="text-align:right;">
201ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
554ms
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
220ms
</td>
<td style="text-align:right;">
288ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
525ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
296ms
</td>
<td style="text-align:right;">
197ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
11ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
515ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
266ms
</td>
<td style="text-align:right;">
184ms
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
16ms
</td>
<td style="text-align:right;">
25ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
503ms
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
276ms
</td>
<td style="text-align:right;">
201ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
4ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
6ms
</td>
<td style="text-align:right;">
492ms
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="reading-multiple-delimited-files" class="section level1">
<h1 class="hasAnchor">
<a href="#reading-multiple-delimited-files" class="anchor"></a>Reading multiple delimited files</h1>
<p>The code used to run the taxi multiple file benchmarks is at <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/taxi_multiple-benchmark.R">bench/taxi_multiple-benchmark.R</a>.</p>
<p>The benchmark reads all 12 files in the taxi trip fare data, totaling 173,179,759 rows and 12 columns for a total file size of 18.4G.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-8-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
manip
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
25m 56s
</td>
<td style="text-align:right;">
9ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
22.6s
</td>
<td style="text-align:right;">
7s
</td>
<td style="text-align:right;">
26m 25.6s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
7m 31.8s
</td>
<td style="text-align:right;">
91ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
11.8s
</td>
<td style="text-align:right;">
9.3s
</td>
<td style="text-align:right;">
7m 53s
</td>
</tr>
<tr>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
data.table
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4m 20.1s
</td>
<td style="text-align:right;">
5ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1s
</td>
<td style="text-align:right;">
3.8s
</td>
<td style="text-align:right;">
4m 25s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
3m 38.2s
</td>
<td style="text-align:right;">
91ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2.2s
</td>
<td style="text-align:right;">
9.3s
</td>
<td style="text-align:right;">
3m 49.8s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
12.5s
</td>
<td style="text-align:right;">
129ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
10.2s
</td>
<td style="text-align:right;">
18.8s
</td>
<td style="text-align:right;">
24.8s
</td>
<td style="text-align:right;">
1m 6.4s
</td>
</tr>
</tbody>
</table>
</div>
<div id="reading-fixed-width-files" class="section level1">
<h1 class="hasAnchor">
<a href="#reading-fixed-width-files" class="anchor"></a>Reading fixed width files</h1>
<div id="united-states-census-5-percent-public-use-microdata-sample-files" class="section level2">
<h2 class="hasAnchor">
<a href="#united-states-census-5-percent-public-use-microdata-sample-files" class="anchor"></a>United States Census 5-Percent Public Use Microdata Sample files</h2>
<p>This fixed width dataset contains individual records of the characteristics of a 5 percent sample of people and housing units from the year 2000 and is freely available at <a href="https://www2.census.gov/census_2000/datasets/PUMS/FivePercent/California/all_California.zip" class="uri">https://www2.census.gov/census_2000/datasets/PUMS/FivePercent/California/all_California.zip</a>. The data is split into files by state, and the state of California was used in this benchmark.</p>
<p>The data totals 2,342,340 rows and 113 columns with a total file size of 677M.</p>
</div>
<div id="census-data-benchmarks" class="section level2">
<h2 class="hasAnchor">
<a href="#census-data-benchmarks" class="anchor"></a>Census data benchmarks</h2>
<p>The code used to run the census data benchmarks is at <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/fwf-benchmark.R">bench/fwf-benchmark.R</a>.</p>
<img src="benchmarks_files/figure-html/unnamed-chunk-10-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
package
</th>
<th style="text-align:right;">
manip
</th>
<th style="text-align:right;">
altrep
</th>
<th style="text-align:right;">
read
</th>
<th style="text-align:right;">
print
</th>
<th style="text-align:right;">
head
</th>
<th style="text-align:right;">
tail
</th>
<th style="text-align:right;">
sample
</th>
<th style="text-align:right;">
filter
</th>
<th style="text-align:right;">
aggregate
</th>
<th style="text-align:right;">
total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
read.delim
</td>
<td style="text-align:right;">
base
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
16m 25.2s
</td>
<td style="text-align:right;">
15ms
</td>
<td style="text-align:right;">
2ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
3ms
</td>
<td style="text-align:right;">
451ms
</td>
<td style="text-align:right;">
81ms
</td>
<td style="text-align:right;">
16m 25.7s
</td>
</tr>
<tr>
<td style="text-align:right;">
readr
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
27.5s
</td>
<td style="text-align:right;">
260ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
100ms
</td>
<td style="text-align:right;">
126ms
</td>
<td style="text-align:right;">
27.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
none
</td>
<td style="text-align:right;">
14.5s
</td>
<td style="text-align:right;">
131ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
177ms
</td>
<td style="text-align:right;">
534ms
</td>
<td style="text-align:right;">
15.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
normal
</td>
<td style="text-align:right;">
7.3s
</td>
<td style="text-align:right;">
123ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
7ms
</td>
<td style="text-align:right;">
476ms
</td>
<td style="text-align:right;">
438ms
</td>
<td style="text-align:right;">
8.3s
</td>
</tr>
<tr>
<td style="text-align:right;">
vroom
</td>
<td style="text-align:right;">
dplyr
</td>
<td style="text-align:right;">
full
</td>
<td style="text-align:right;">
232ms
</td>
<td style="text-align:right;">
218ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
1ms
</td>
<td style="text-align:right;">
2.7s
</td>
<td style="text-align:right;">
450ms
</td>
<td style="text-align:right;">
417ms
</td>
<td style="text-align:right;">
4s
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="writing-delimited-files" class="section level1">
<h1 class="hasAnchor">
<a href="#writing-delimited-files" class="anchor"></a>Writing delimited files</h1>
<p>The code used to run the taxi writing benchmarks is at <a href="https://github.com/r-lib/vroom/blob/master/inst/bench/taxi_writing-benchmark.R">bench/taxi_writing-benchmark.R</a>.</p>
<p>The benchmarks write out the taxi trip dataset in three different ways.</p>
<ul>
<li>An uncompressed file</li>
<li>A gzip compressed file using <code><a href="https://rdrr.io/r/base/connections.html">gzfile()</a></code> <em>(readr and vroom do this automatically for files ending in <code>.gz</code>)</em>
</li>
<li>A multithreaded gzip compressed file using a <code><a href="https://rdrr.io/r/base/connections.html">pipe()</a></code> connection to <a href="https://zlib.net/pigz/">pigz</a>
</li>
</ul>
<p><em>Note the current CRAN version of data.table (1.12.2) does not support writing directly to gzip compressed files, though the developement version (1.12.3) does </em></p>
<img src="benchmarks_files/figure-html/unnamed-chunk-11-1.png" width="960"><table class="table">
<thead><tr>
<th style="text-align:right;">
method
</th>
<th style="text-align:right;">
write.delim
</th>
<th style="text-align:right;">
readr
</th>
<th style="text-align:right;">
data.table
</th>
<th style="text-align:right;">
vroom
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
xz
</td>
<td style="text-align:right;">
14m 43.5s
</td>
<td style="text-align:right;">
13m 12.9s
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
10m 3.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
gzip
</td>
<td style="text-align:right;">
3m 23.9s
</td>
<td style="text-align:right;">
2m 2.9s
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1m 17.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
multithreaded gzip
</td>
<td style="text-align:right;">
1m 41.4s
</td>
<td style="text-align:right;">
51.8s
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
8.1s
</td>
</tr>
<tr>
<td style="text-align:right;">
zstandard
</td>
<td style="text-align:right;">
1m 40.2s
</td>
<td style="text-align:right;">
50.2s
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
12.9s
</td>
</tr>
<tr>
<td style="text-align:right;">
uncompressed
</td>
<td style="text-align:right;">
1m 41.5s
</td>
<td style="text-align:right;">
51.2s
</td>
<td style="text-align:right;">
1.2s
</td>
<td style="text-align:right;">
1.7s
</td>
</tr>
</tbody>
</table>
<div id="session-and-package-information" class="section level2">
<h2 class="hasAnchor">
<a href="#session-and-package-information" class="anchor"></a>Session and package information</h2>
<pre><code>#&gt; Rows: 5
#&gt; Cols: 11
#&gt; chr  [7]: package, ondiskversion, loadedversion, path, loadedpath, source, library
#&gt; lgl  [3]: attached, is_base, md5ok
#&gt; date [1]: date
#&gt; 
#&gt; Call `spec()` for a copy-pastable column specification
#&gt; Specify the column types with `col_types` to quiet this message</code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">package</th>
<th align="left">version</th>
<th align="left">date</th>
<th align="left">source</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">base</td>
<td align="left">3.6.0</td>
<td align="left">2019-05-06</td>
<td align="left">local</td>
</tr>
<tr class="even">
<td align="left">data.table</td>
<td align="left">1.12.2</td>
<td align="left">2019-04-07</td>
<td align="left">CRAN (R 3.6.0)</td>
</tr>
<tr class="odd">
<td align="left">dplyr</td>
<td align="left">0.8.1</td>
<td align="left">2019-05-14</td>
<td align="left">CRAN (R 3.6.0)</td>
</tr>
<tr class="even">
<td align="left">readr</td>
<td align="left">1.3.1</td>
<td align="left">2018-12-21</td>
<td align="left">CRAN (R 3.6.0)</td>
</tr>
<tr class="odd">
<td align="left">vroom</td>
<td align="left">1.0.2</td>
<td align="left">2019-06-27</td>
<td align="left">local</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#how-it-works">How it works</a></li>
      <li>
<a href="#reading-delimited-files">Reading delimited files</a><ul class="nav nav-pills nav-stacked">
<li><a href="#taxi-trip-dataset">Taxi Trip Dataset</a></li>
      <li><a href="#all-numeric-data">All numeric data</a></li>
      <li><a href="#all-character-data">All character data</a></li>
      </ul>
</li>
      <li><a href="#reading-multiple-delimited-files">Reading multiple delimited files</a></li>
      <li>
<a href="#reading-fixed-width-files">Reading fixed width files</a><ul class="nav nav-pills nav-stacked">
<li><a href="#united-states-census-5-percent-public-use-microdata-sample-files">United States Census 5-Percent Public Use Microdata Sample files</a></li>
      <li><a href="#census-data-benchmarks">Census data benchmarks</a></li>
      </ul>
</li>
      <li>
<a href="#writing-delimited-files">Writing delimited files</a><ul class="nav nav-pills nav-stacked">
<li><a href="#session-and-package-information">Session and package information</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://jimhester.com">Jim Hester</a>, <a href="http://hadley.nz">Hadley Wickham</a>, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
